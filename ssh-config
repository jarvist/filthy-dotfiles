# Jarvist Moore Frost; 2014-2015
#In levels of increasing subtlety, this ssh-config contains:-
#* default usernames / shortened hostnames for Bath / IC / EPSRC national
#facilities (bash autocomplete also reads these); this is more elegant and
#general than doing the same with bash 'alias'
#* Better default keep-alives, so that your SSH sessions are more robust to
#being closed (matters a lot on dodgy wifi) 
#* tunnelling over SSH via lcpu into bath.ac.uk resources (i.e. no need for
#a VPN to get to Aquila / Neon etc.). These are the 'xxxx-tunnel' shortcuts.
#* Master sessions enabled (further ssh / scp commands are tunnelled over the
#master session, stopping you hammering the login nodes. It's almost instantly
#fast to spawn another shell session, rather than TCP / SSH handshake, which
#means SCP command paths autocomplete just as fast as 'cd'ing' on the login
#node.)
#
#Nb: Rsync reads this file too

# Global settings
Host *
    Protocol 2 
# Protocol 1 well dodgy
    Compression yes
    ServerAliveCountMax 5  
# Up to 5 pings with no reply before hang up
    ServerAliveInterval 30 
# Seconds. Needs to be <60s for some home routers

# Enable Master Sessions - (for scp autocomplete + not hammering HPC facilities)
# See: http://unix.stackexchange.com/questions/32984/multiple-ssh-sessions-in-single-command/33012#33012
# To create a master: ssh -N -M target-host
# To delete a dead one: ssh -O exit target-host
ControlMaster auto
ControlPath ~/.ssh/control:%h:%p:%r

#     ___    ____
#    |_ _|  / ___|
#     | |  | |
#     | |  | |___
#    |___|  \____| 

# Imperial hosts - need VPN to be on / inside IC wireless
Host hpc
    HostName login.cx1.hpc.ic.ac.uk
    User jmf02

Host union
    HostName union.ic.ac.uk
    User jmf02
    ForwardAgent yes 
#above ForwardAgent allows access to github via local machine keys

#     ____     _   _____  _   _
#    | __ )   / \ |_   _|| | | |
#    |  _ \  / _ \  | |  | |_| |
#    | |_) |/ ___ \ | |  |  _  |
#    |____//_/   \_\|_|  |_| |_|

#Bath general access;
#https://wiki.bath.ac.uk/display/HPC/Logging+in+from+outside

# These apply to any Bath host
Host *.bath.ac.uk
    User jmf45
#    PreferredAuthentications publickey
#    IdentityFile /home/jarvist/.ssh/bath_rsa
 
# These settings are specific to LCPU
Host lcpu
    User jmf45
    HostName lcpu.bath.ac.uk
#    PreferredAuthentications publickey
#    IdentityFile /home/jarvist/.ssh/bath_rsa
 
# Jarv's desktop at work
Host potassium workmac
    User jarvist
    Hostname chmc-7602.campus.bath.ac.uk
    ProxyCommand ssh lcpu nc %h %p

# AQUILA - Bath Cluster
Host aquila
    User jmf45
    HostName aquila.bath.ac.uk
    PreferredAuthentications publickey
#    IdentityFile /home/jarvist/.ssh/bath_rsa
#    ProxyCommand ssh lcpu nc %h %p

Host aquila-tunnel
    User jmf45
    HostName aquila.bath.ac.uk
    PreferredAuthentications publickey
    ProxyCommand ssh lcpu nc %h %p


# BALENA - Bath new Cluster (2015)
Host balena
    User jmf45 
    HostName balena.bath.ac.uk
    PreferredAuthentications publickey

Host balena-tunnel
    User jmf45 
    HostName balena.bath.ac.uk
    PreferredAuthentications publickey
    ProxyCommand ssh lcpu nc %h %p

# NEON - WMD Group mini cluster ( 12 nodes )
Host neon chsv-wmd
    User jarvist
    HostName chsv-wmd.bath.ac.uk 
    LocalForward 2000 localhost:80
# Localforward gives access to Ganglia web monitoring...
#    LocalForward 2001 138.38.45.74:80 

Host neon-tunnel
    User jarvist
    HostName chsv-wmd.bath.ac.uk 
    ProxyCommand ssh lcpu nc %h %p

# Group machines for general use (not clusters)
Host chlorine tesla # Linux - :) - Redhat
    User jarvist
    Hostname chmc-chlorine.bath.ac.uk

Host chlorine-tunnel tesla-tunnel # Linux
    User jarvist
    Hostname chmc-chlorine.bath.ac.uk
    ProxyCommand ssh lcpu nc %h %p

Host aluminium slave # Headless (?) i7 iMac
    User compchem
    Hostname chpc-aw10.bath.ac.uk

# The Dell servers - 2014/2015, all ~24 hyperthread cores, 32-64GB mem

Host titanium #2x6 core Xeon, 64GB mem
    User jarvist
    Hostname chpc-titanium.bath.ac.uk

Host titanium-tunnel #2x6 core Xeon, 64GB mem
    User jarvist
    Hostname chpc-titanium.bath.ac.uk
    ProxyCommand ssh lcpu nc %h %p

Host scandium wmd-pv #2x6 core Xeon, 64GB mem
    User jarvist
    Hostname chpc-scandium.bath.ac.uk

Host scandium-tunnel wmd-pv-tunnel #2x6 core Xeon, 64GB mem
    User jarvist
    Hostname chpc-scandium.bath.ac.uk
    ProxyCommand ssh lcpu nc %h %p

Host iron  # 2x8 core Xeon (2.4GHz), 32 GB mem
    User jarvist 
    Hostname chpc-iron.bath.ac.uk

Host iron-tunnel
    User jarvist
    Hostname chpc-iron.bath.ac.uk
    ProxyCommand ssh lcpu nc %h %p

Host cobalt # 2x8 core (32 HT) E5-2630 @ 2.40GHz; 64GB mem
    User jarvist
    Hostname chpc-cobalt.bath.ac.uk

Host cobald-tunnel
    User jarvist
    Hostname chpc-cobalt.bath.ac.uk
    ProxyCommand ssh lcpu nc %h %p


#     _____  ____   ____   ____    ____
#    | ____||  _ \ / ___| |  _ \  / ___|
#    |  _|  | |_) |\___ \ | |_) || |
#    | |___ |  __/  ___) ||  _ < | |___
#    |_____||_|    |____/ |_| \_\ \____|

# EPSRC National facilities
Host hector
    User jarvist
    HostName login.hector.ac.uk

Host archer
    User jarvist
    HostName login.archer.ac.uk

Host ultrafox fox ultra
    User pr1ujarv
    HostName login.archer.ac.uk

